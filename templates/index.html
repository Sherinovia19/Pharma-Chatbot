<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>MedCheck AI</title>
<link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
<div class="container">
  <!-- Left Panel -->
  <div class="left-panel">
    <h2>Quick Medicine Check</h2>
    <input id="medicine-name" type="text" placeholder="Medicine Name *">
    <input id="batch-number" type="text" placeholder="Batch Number">
    <input id="expiry-date" type="date" placeholder="Expiry Date">
    <div class="tips">
      <h3>Quick Tips ðŸ’¡</h3>
      <ul>
        <li>Ask about any medicine by name</li>
        <li>Check batch numbers for recalls</li>
        <li>Get storage recommendations</li>
      </ul>
    </div>
  </div>

  <!-- Right Panel -->
  <div class="right-panel">
    <div class="chat-header">MedCheck AI</div>
    <div id="chat-box" class="chat-box">
      <div class="message bot">Hello! ðŸ‘‹ I'm your MedCheck AI assistant. How can I help you today?</div>
    </div>
    <div class="chat-input">
      <input id="message-input" type="text" placeholder="Ask me anything about medicines...">
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>
</div>

<script>
const chatBox = document.getElementById("chat-box");
const input = document.getElementById("message-input");

function appendMessage(text, sender) {
  const msgDiv = document.createElement("div");
  msgDiv.classList.add("message", sender);
  msgDiv.innerText = text;
  chatBox.appendChild(msgDiv);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function sendMessage() {
  const msg = input.value.trim();
  if (!msg) return;
  appendMessage(msg, "user");
  input.value = "";

  fetch("/api/message", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({message: msg})
  })
  .then(res => res.json())
  .then(data => appendMessage(data.reply, "bot"))
  .catch(() => appendMessage("âš ï¸ Bot encountered an error.", "bot"));
}

input.addEventListener("keypress", e => { if(e.key==="Enter") sendMessage(); });
</script>
</body>
</html>

